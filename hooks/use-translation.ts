'use client'

import { useState, useEffect, useCallback } from 'react'

// Supported languages with actual translations
export const SUPPORTED_LANGUAGES = {
  'en': { name: 'English', flag: 'ğŸ‡ºğŸ‡¸', rtl: false },
  'es': { name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸', rtl: false },
  'fr': { name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·', rtl: false },
  'de': { name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª', rtl: false },
  'it': { name: 'Italiano', flag: 'ğŸ‡®ğŸ‡¹', rtl: false },
  'pt': { name: 'PortuguÃªs', flag: 'ğŸ‡µğŸ‡¹', rtl: false },
  'ru': { name: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹', flag: 'ğŸ‡·ğŸ‡º', rtl: false },
  'ja': { name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ', rtl: false },
  'ko': { name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·', rtl: false },
  'zh': { name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³', rtl: false },
  'ar': { name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', flag: 'ğŸ‡¸ğŸ‡¦', rtl: true },
  'hi': { name: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€', flag: 'ğŸ‡®ğŸ‡³', rtl: false }
} as const

export type SupportedLanguage = keyof typeof SUPPORTED_LANGUAGES

// Translation keys and values
const TRANSLATIONS: Record<SupportedLanguage, Record<string, string>> = {
  'en': {
    // Navigation
    'nav.dashboard': 'Dashboard',
    'nav.settings': 'Settings',
    'nav.profile': 'Profile',
    'nav.bookmarks': 'Bookmarks',
    'nav.analytics': 'Analytics',
    'nav.search': 'Search',
    'nav.marketplace': 'Marketplace',
    'nav.ai-copilot': 'AI Copilot',
    'nav.dna-profile': 'DNA Profile',
    'nav.ai-filtering': 'AI Filtering',
    'nav.voice-commands': 'Voice Commands',
    'nav.learning-mode': 'Learning Mode',
    'nav.voice-test': 'Voice Test',
    
    // Common actions
    'action.save': 'Save',
    'action.cancel': 'Cancel',
    'action.delete': 'Delete',
    'action.edit': 'Edit',
    'action.create': 'Create',
    'action.update': 'Update',
    'action.search': 'Search',
    'action.filter': 'Filter',
    'action.sort': 'Sort',
    'action.export': 'Export',
    'action.import': 'Import',
    'action.reset': 'Reset',
    'action.refresh': 'Refresh',
    'action.close': 'Close',
    'action.open': 'Open',
    'action.view': 'View',
    'action.download': 'Download',
    'action.upload': 'Upload',
    'action.share': 'Share',
    'action.copy': 'Copy',
    'action.paste': 'Paste',
    'action.cut': 'Cut',
    'action.undo': 'Undo',
    'action.redo': 'Redo',
    'action.select-all': 'Select All',
    'action.clear': 'Clear',
    'action.apply': 'Apply',
    'action.confirm': 'Confirm',
    'action.submit': 'Submit',
    'action.continue': 'Continue',
    'action.back': 'Back',
    'action.next': 'Next',
    'action.previous': 'Previous',
    'action.finish': 'Finish',
    'action.start': 'Start',
    'action.stop': 'Stop',
    'action.pause': 'Pause',
    'action.resume': 'Resume',
    'action.retry': 'Retry',
    'action.skip': 'Skip',
    'action.enable': 'Enable',
    'action.disable': 'Disable',
    'action.activate': 'Activate',
    'action.deactivate': 'Deactivate',
    'action.install': 'Install',
    'action.uninstall': 'Uninstall',
    'action.configure': 'Configure',
    'action.customize': 'Customize',
    'action.optimize': 'Optimize',
    'action.analyze': 'Analyze',
    'action.process': 'Process',
    'action.generate': 'Generate',
    'action.translate': 'Translate',
    'action.connect': 'Connect',
    'action.disconnect': 'Disconnect',
    'action.sync': 'Sync',
    'action.backup': 'Backup',
    'action.restore': 'Restore',
    'action.migrate': 'Migrate',
    'action.upgrade': 'Upgrade',
    'action.downgrade': 'Downgrade',
    'action.validate': 'Validate',
    'action.verify': 'Verify',
    'action.test': 'Test',
    'action.debug': 'Debug',
    'action.monitor': 'Monitor',
    'action.track': 'Track',
    'action.log': 'Log',
    'action.report': 'Report',
    'action.preview': 'Preview',
    'action.publish': 'Publish',
    'action.unpublish': 'Unpublish',
    'action.archive': 'Archive',
    'action.unarchive': 'Unarchive',
    'action.bookmark': 'Bookmark',
    'action.unbookmark': 'Remove Bookmark',
    'action.favorite': 'Add to Favorites',
    'action.unfavorite': 'Remove from Favorites',
    'action.like': 'Like',
    'action.unlike': 'Unlike',
    'action.follow': 'Follow',
    'action.unfollow': 'Unfollow',
    'action.subscribe': 'Subscribe',
    'action.unsubscribe': 'Unsubscribe',
    'action.notify': 'Notify',
    'action.mute': 'Mute',
    'action.unmute': 'Unmute',
    'action.block': 'Block',
    'action.unblock': 'Unblock',
    'action.ban': 'Ban',
    'action.unban': 'Unban',
    'action.approve': 'Approve',
    'action.reject': 'Reject',
    'action.accept': 'Accept',
    'action.decline': 'Decline',
    'action.invite': 'Invite',
    'action.join': 'Join',
    'action.leave': 'Leave',
    'action.login': 'Login',
    'action.logout': 'Logout',
    'action.register': 'Register',
    'action.signup': 'Sign Up',
    'action.signin': 'Sign In',
    'action.signout': 'Sign Out',
    
    // Status messages
    'status.loading': 'Loading...',
    'status.saving': 'Saving...',
    'status.saved': 'Saved',
    'status.error': 'Error',
    'status.success': 'Success',
    'status.warning': 'Warning',
    'status.info': 'Information',
    'status.completed': 'Completed',
    'status.failed': 'Failed',
    'status.pending': 'Pending',
    'status.processing': 'Processing...',
    'status.connecting': 'Connecting...',
    'status.connected': 'Connected',
    'status.disconnected': 'Disconnected',
    'status.online': 'Online',
    'status.offline': 'Offline',
    'status.available': 'Available',
    'status.unavailable': 'Unavailable',
    'status.active': 'Active',
    'status.inactive': 'Inactive',
    'status.enabled': 'Enabled',
    'status.disabled': 'Disabled',
    'status.public': 'Public',
    'status.private': 'Private',
    'status.draft': 'Draft',
    'status.published': 'Published',
    'status.archived': 'Archived',
    'status.deleted': 'Deleted',
    'status.updated': 'Updated',
    'status.created': 'Created',
    'status.modified': 'Modified',
    'status.synchronized': 'Synchronized',
    'status.backed-up': 'Backed Up',
    'status.restored': 'Restored',
    'status.migrated': 'Migrated',
    'status.upgraded': 'Upgraded',
    'status.downgraded': 'Downgraded',
    'status.validated': 'Validated',
    'status.verified': 'Verified',
    'status.tested': 'Tested',
    'status.debugged': 'Debugged',
    'status.monitored': 'Monitored',
    'status.tracked': 'Tracked',
    'status.logged': 'Logged',
    'status.reported': 'Reported',
    'status.previewed': 'Previewed',
    'status.optimized': 'Optimized',
    'status.analyzed': 'Analyzed',
    'status.processed': 'Processed',
    'status.generated': 'Generated',
    'status.translated': 'Translated',
    'status.configured': 'Configured',
    'status.customized': 'Customized',
    'status.installed': 'Installed',
    'status.uninstalled': 'Uninstalled',
    'status.activated': 'Activated',
    'status.deactivated': 'Deactivated',
    'status.approved': 'Approved',
    'status.rejected': 'Rejected',
    'status.accepted': 'Accepted',
    'status.declined': 'Declined',
    'status.invited': 'Invited',
    'status.joined': 'Joined',
    'status.left': 'Left',
    'status.logged-in': 'Logged In',
    'status.logged-out': 'Logged Out',
    'status.registered': 'Registered',
    'status.signed-up': 'Signed Up',
    'status.signed-in': 'Signed In',
    'status.signed-out': 'Signed Out',
    'status.bookmarked': 'Bookmarked',
    'status.unbookmarked': 'Bookmark Removed',
    'status.favorited': 'Added to Favorites',
    'status.unfavorited': 'Removed from Favorites',
    'status.liked': 'Liked',
    'status.unliked': 'Unliked',
    'status.followed': 'Followed',
    'status.unfollowed': 'Unfollowed',
    'status.subscribed': 'Subscribed',
    'status.unsubscribed': 'Unsubscribed',
    'status.notified': 'Notified',
    'status.muted': 'Muted',
    'status.unmuted': 'Unmuted',
    'status.blocked': 'Blocked',
    'status.unblocked': 'Unblocked',
    'status.banned': 'Banned',
    'status.unbanned': 'Unbanned',
    'status.no-data': 'No data available'
  },
  'es': {
    // Basic translations for Spanish
    'nav.dashboard': 'Panel de Control',
    'nav.settings': 'ConfiguraciÃ³n',
    'nav.profile': 'Perfil',
    'nav.bookmarks': 'Marcadores',
    'nav.analytics': 'AnalÃ­ticas',
    'nav.search': 'Buscar',
    'nav.marketplace': 'Mercado',
    'nav.ai-copilot': 'Copiloto IA',
    'nav.dna-profile': 'Perfil ADN',
    'nav.ai-filtering': 'Filtrado IA',
    'nav.voice-commands': 'Comandos de Voz',
    'nav.learning-mode': 'Modo Aprendizaje',
    'nav.voice-test': 'Prueba de Voz',
    'action.save': 'Guardar',
    'action.cancel': 'Cancelar',
    'action.delete': 'Eliminar',
    'action.edit': 'Editar',
    'action.create': 'Crear',
    'action.search': 'Buscar',
    'status.loading': 'Cargando...',
    'status.saving': 'Guardando...',
    'status.saved': 'Guardado',
    'status.error': 'Error',
    'status.success': 'Ã‰xito',
    'status.no-data': 'No hay datos disponibles'
  },
  // For other languages, we'll fall back to English until translations are added
  'fr': {
    'nav.dashboard': 'Tableau de Bord',
    'nav.settings': 'ParamÃ¨tres',
    'nav.profile': 'Profil',
    'nav.bookmarks': 'Signets',
    'nav.analytics': 'Analytiques',
    'nav.search': 'Rechercher',
    'nav.marketplace': 'MarchÃ©',
    'nav.ai-copilot': 'Copilote IA',
    'nav.dna-profile': 'Profil ADN',
    'nav.ai-filtering': 'Filtrage IA',
    'nav.voice-commands': 'Commandes Vocales',
    'nav.learning-mode': 'Mode Apprentissage',
    'nav.voice-test': 'Test Vocal',
    'action.save': 'Sauvegarder',
    'action.cancel': 'Annuler',
    'action.delete': 'Supprimer',
    'action.edit': 'Modifier',
    'action.create': 'CrÃ©er',
    'action.search': 'Rechercher',
    'status.loading': 'Chargement...',
    'status.saving': 'Sauvegarde...',
    'status.saved': 'SauvegardÃ©',
    'status.error': 'Erreur',
    'status.success': 'SuccÃ¨s',
    'status.no-data': 'Aucune donnÃ©e disponible'
  },
  'de': {
    'nav.dashboard': 'Dashboard',
    'nav.settings': 'Einstellungen',
    'nav.profile': 'Profil',
    'nav.bookmarks': 'Lesezeichen',
    'nav.analytics': 'Analytics',
    'nav.search': 'Suchen',
    'nav.marketplace': 'Marktplatz',
    'nav.ai-copilot': 'KI-Copilot',
    'nav.dna-profile': 'DNA-Profil',
    'nav.ai-filtering': 'KI-Filterung',
    'nav.voice-commands': 'Sprachbefehle',
    'nav.learning-mode': 'Lernmodus',
    'nav.voice-test': 'Sprachtest',
    'action.save': 'Speichern',
    'action.cancel': 'Abbrechen',
    'action.delete': 'LÃ¶schen',
    'action.edit': 'Bearbeiten',
    'action.create': 'Erstellen',
    'action.search': 'Suchen',
    'status.loading': 'Laden...',
    'status.saving': 'Speichern...',
    'status.saved': 'Gespeichert',
    'status.error': 'Fehler',
    'status.success': 'Erfolg',
    'status.no-data': 'Keine Daten verfÃ¼gbar'
  },
  'it': {
    'nav.dashboard': 'Dashboard',
    'nav.settings': 'Impostazioni',
    'nav.profile': 'Profilo',
    'nav.bookmarks': 'Segnalibri',
    'nav.analytics': 'Analytics',
    'nav.search': 'Cerca',
    'nav.marketplace': 'Marketplace',
    'nav.ai-copilot': 'Copilota IA',
    'nav.dna-profile': 'Profilo DNA',
    'nav.ai-filtering': 'Filtraggio IA',
    'nav.voice-commands': 'Comandi Vocali',
    'nav.learning-mode': 'ModalitÃ  Apprendimento',
    'nav.voice-test': 'Test Vocale',
    'action.save': 'Salva',
    'action.cancel': 'Annulla',
    'action.delete': 'Elimina',
    'action.edit': 'Modifica',
    'action.create': 'Crea',
    'action.search': 'Cerca',
    'status.loading': 'Caricamento...',
    'status.saving': 'Salvataggio...',
    'status.saved': 'Salvato',
    'status.error': 'Errore',
    'status.success': 'Successo',
    'status.no-data': 'Nessun dato disponibile'
  },
  'pt': {
    'nav.dashboard': 'Painel',
    'nav.settings': 'ConfiguraÃ§Ãµes',
    'nav.profile': 'Perfil',
    'nav.bookmarks': 'Favoritos',
    'nav.analytics': 'Analytics',
    'nav.search': 'Pesquisar',
    'nav.marketplace': 'Marketplace',
    'nav.ai-copilot': 'Copiloto IA',
    'nav.dna-profile': 'Perfil DNA',
    'nav.ai-filtering': 'Filtragem IA',
    'nav.voice-commands': 'Comandos de Voz',
    'nav.learning-mode': 'Modo Aprendizagem',
    'nav.voice-test': 'Teste de Voz',
    'action.save': 'Salvar',
    'action.cancel': 'Cancelar',
    'action.delete': 'Excluir',
    'action.edit': 'Editar',
    'action.create': 'Criar',
    'action.search': 'Pesquisar',
    'status.loading': 'Carregando...',
    'status.saving': 'Salvando...',
    'status.saved': 'Salvo',
    'status.error': 'Erro',
    'status.success': 'Sucesso',
    'status.no-data': 'Nenhum dado disponÃ­vel'
  },
  'ru': {
    'nav.dashboard': 'ĞŸĞ°Ğ½ĞµĞ»ÑŒ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ',
    'nav.settings': 'ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸',
    'nav.profile': 'ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ',
    'nav.bookmarks': 'Ğ—Ğ°ĞºĞ»Ğ°Ğ´ĞºĞ¸',
    'nav.analytics': 'ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°',
    'nav.search': 'ĞŸĞ¾Ğ¸ÑĞº',
    'nav.marketplace': 'ĞœĞ°Ñ€ĞºĞµÑ‚Ğ¿Ğ»ĞµĞ¹Ñ',
    'nav.ai-copilot': 'Ğ˜Ğ˜ ĞŸĞ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº',
    'nav.dna-profile': 'Ğ”ĞĞš ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ',
    'nav.ai-filtering': 'Ğ˜Ğ˜ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ',
    'nav.voice-commands': 'Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹',
    'nav.learning-mode': 'Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ',
    'nav.voice-test': 'Ğ¢ĞµÑÑ‚ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°',
    'action.save': 'Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ',
    'action.cancel': 'ĞÑ‚Ğ¼ĞµĞ½Ğ°',
    'action.delete': 'Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ',
    'action.edit': 'Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ',
    'action.create': 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ',
    'action.search': 'ĞŸĞ¾Ğ¸ÑĞº',
    'status.loading': 'Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...',
    'status.saving': 'Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ...',
    'status.saved': 'Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾',
    'status.error': 'ĞÑˆĞ¸Ğ±ĞºĞ°',
    'status.success': 'Ğ£ÑĞ¿ĞµÑ…',
    'status.no-data': 'Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚'
  },
  'ja': {
    'nav.dashboard': 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰',
    'nav.settings': 'è¨­å®š',
    'nav.profile': 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«',
    'nav.bookmarks': 'ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯',
    'nav.analytics': 'ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹',
    'nav.search': 'æ¤œç´¢',
    'nav.marketplace': 'ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹',
    'nav.ai-copilot': 'AIã‚³ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ',
    'nav.dna-profile': 'DNAãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«',
    'nav.ai-filtering': 'AIãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°',
    'nav.voice-commands': 'éŸ³å£°ã‚³ãƒãƒ³ãƒ‰',
    'nav.learning-mode': 'å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰',
    'nav.voice-test': 'éŸ³å£°ãƒ†ã‚¹ãƒˆ',
    'action.save': 'ä¿å­˜',
    'action.cancel': 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
    'action.delete': 'å‰Šé™¤',
    'action.edit': 'ç·¨é›†',
    'action.create': 'ä½œæˆ',
    'action.search': 'æ¤œç´¢',
    'status.loading': 'èª­ã¿è¾¼ã¿ä¸­...',
    'status.saving': 'ä¿å­˜ä¸­...',
    'status.saved': 'ä¿å­˜æ¸ˆã¿',
    'status.error': 'ã‚¨ãƒ©ãƒ¼',
    'status.success': 'æˆåŠŸ',
    'status.no-data': 'ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“'
  },
  'ko': {
    'nav.dashboard': 'ëŒ€ì‹œë³´ë“œ',
    'nav.settings': 'ì„¤ì •',
    'nav.profile': 'í”„ë¡œí•„',
    'nav.bookmarks': 'ë¶ë§ˆí¬',
    'nav.analytics': 'ë¶„ì„',
    'nav.search': 'ê²€ìƒ‰',
    'nav.marketplace': 'ë§ˆì¼“í”Œë ˆì´ìŠ¤',
    'nav.ai-copilot': 'AI ì½”íŒŒì¼ëŸ¿',
    'nav.dna-profile': 'DNA í”„ë¡œí•„',
    'nav.ai-filtering': 'AI í•„í„°ë§',
    'nav.voice-commands': 'ìŒì„± ëª…ë ¹',
    'nav.learning-mode': 'í•™ìŠµ ëª¨ë“œ',
    'nav.voice-test': 'ìŒì„± í…ŒìŠ¤íŠ¸',
    'action.save': 'ì €ì¥',
    'action.cancel': 'ì·¨ì†Œ',
    'action.delete': 'ì‚­ì œ',
    'action.edit': 'í¸ì§‘',
    'action.create': 'ìƒì„±',
    'action.search': 'ê²€ìƒ‰',
    'status.loading': 'ë¡œë”© ì¤‘...',
    'status.saving': 'ì €ì¥ ì¤‘...',
    'status.saved': 'ì €ì¥ë¨',
    'status.error': 'ì˜¤ë¥˜',
    'status.success': 'ì„±ê³µ',
    'status.no-data': 'ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤'
  },
  'zh': {
    'nav.dashboard': 'ä»ªè¡¨æ¿',
    'nav.settings': 'è®¾ç½®',
    'nav.profile': 'ä¸ªäººèµ„æ–™',
    'nav.bookmarks': 'ä¹¦ç­¾',
    'nav.analytics': 'åˆ†æ',
    'nav.search': 'æœç´¢',
    'nav.marketplace': 'å¸‚åœº',
    'nav.ai-copilot': 'AIå‰¯é©¾é©¶',
    'nav.dna-profile': 'DNAæ¡£æ¡ˆ',
    'nav.ai-filtering': 'AIè¿‡æ»¤',
    'nav.voice-commands': 'è¯­éŸ³å‘½ä»¤',
    'nav.learning-mode': 'å­¦ä¹ æ¨¡å¼',
    'nav.voice-test': 'è¯­éŸ³æµ‹è¯•',
    'action.save': 'ä¿å­˜',
    'action.cancel': 'å–æ¶ˆ',
    'action.delete': 'åˆ é™¤',
    'action.edit': 'ç¼–è¾‘',
    'action.create': 'åˆ›å»º',
    'action.search': 'æœç´¢',
    'status.loading': 'åŠ è½½ä¸­...',
    'status.saving': 'ä¿å­˜ä¸­...',
    'status.saved': 'å·²ä¿å­˜',
    'status.error': 'é”™è¯¯',
    'status.success': 'æˆåŠŸ',
    'status.no-data': 'æ— æ•°æ®'
  },
  'ar': {
    'nav.dashboard': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
    'nav.settings': 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
    'nav.profile': 'Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ',
    'nav.bookmarks': 'Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©',
    'nav.analytics': 'Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª',
    'nav.search': 'Ø§Ù„Ø¨Ø­Ø«',
    'nav.marketplace': 'Ø§Ù„Ø³ÙˆÙ‚',
    'nav.ai-copilot': 'Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ',
    'nav.dna-profile': 'Ù…Ù„Ù Ø§Ù„Ø­Ù…Ø¶ Ø§Ù„Ù†ÙˆÙˆÙŠ',
    'nav.ai-filtering': 'ØªØµÙÙŠØ© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ',
    'nav.voice-commands': 'Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØµÙˆØªÙŠØ©',
    'nav.learning-mode': 'ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ù„Ù…',
    'nav.voice-test': 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙˆØª',
    'action.save': 'Ø­ÙØ¸',
    'action.cancel': 'Ø¥Ù„ØºØ§Ø¡',
    'action.delete': 'Ø­Ø°Ù',
    'action.edit': 'ØªØ­Ø±ÙŠØ±',
    'action.create': 'Ø¥Ù†Ø´Ø§Ø¡',
    'action.search': 'Ø¨Ø­Ø«',
    'status.loading': 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
    'status.saving': 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...',
    'status.saved': 'ØªÙ… Ø§Ù„Ø­ÙØ¸',
    'status.error': 'Ø®Ø·Ø£',
    'status.success': 'Ù†Ø¬Ø­',
    'status.no-data': 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©'
  },
  'hi': {
    'nav.dashboard': 'à¤¡à¥ˆà¤¶à¤¬à¥‹à¤°à¥à¤¡',
    'nav.settings': 'à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸',
    'nav.profile': 'à¤ªà¥à¤°à¥‹à¤«à¤¾à¤‡à¤²',
    'nav.bookmarks': 'à¤¬à¥à¤•à¤®à¤¾à¤°à¥à¤•',
    'nav.analytics': 'à¤à¤¨à¤¾à¤²à¤¿à¤Ÿà¤¿à¤•à¥à¤¸',
    'nav.search': 'à¤–à¥‹à¤œà¥‡à¤‚',
    'nav.marketplace': 'à¤®à¤¾à¤°à¥à¤•à¥‡à¤Ÿà¤ªà¥à¤²à¥‡à¤¸',
    'nav.ai-copilot': 'AI à¤¸à¤¹à¤¾à¤¯à¤•',
    'nav.dna-profile': 'DNA à¤ªà¥à¤°à¥‹à¤«à¤¾à¤‡à¤²',
    'nav.ai-filtering': 'AI à¤«à¤¿à¤²à¥à¤Ÿà¤°à¤¿à¤‚à¤—',
    'nav.voice-commands': 'à¤µà¥‰à¤¯à¤¸ à¤•à¤®à¤¾à¤‚à¤¡',
    'nav.learning-mode': 'à¤²à¤°à¥à¤¨à¤¿à¤‚à¤— à¤®à¥‹à¤¡',
    'nav.voice-test': 'à¤µà¥‰à¤¯à¤¸ à¤Ÿà¥‡à¤¸à¥à¤Ÿ',
    'action.save': 'à¤¸à¥‡à¤µ à¤•à¤°à¥‡à¤‚',
    'action.cancel': 'à¤°à¤¦à¥à¤¦ à¤•à¤°à¥‡à¤‚',
    'action.delete': 'à¤¡à¤¿à¤²à¥€à¤Ÿ à¤•à¤°à¥‡à¤‚',
    'action.edit': 'à¤¸à¤‚à¤ªà¤¾à¤¦à¤¿à¤¤ à¤•à¤°à¥‡à¤‚',
    'action.create': 'à¤¬à¤¨à¤¾à¤à¤‚',
    'action.search': 'à¤–à¥‹à¤œà¥‡à¤‚',
    'status.loading': 'à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...',
    'status.saving': 'à¤¸à¥‡à¤µ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...',
    'status.saved': 'à¤¸à¥‡à¤µ à¤¹à¥‹ à¤—à¤¯à¤¾',
    'status.error': 'à¤¤à¥à¤°à¥à¤Ÿà¤¿',
    'status.success': 'à¤¸à¤«à¤²à¤¤à¤¾',
    'status.no-data': 'à¤•à¥‹à¤ˆ à¤¡à¥‡à¤Ÿà¤¾ à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤¨à¤¹à¥€à¤‚'
  }
}

interface TranslationContextType {
  language: SupportedLanguage
  locale: SupportedLanguage // Alias for compatibility
  setLanguage: (language: SupportedLanguage) => void
  t: (key: string, fallback?: string) => string
  isRTL: boolean
  availableLanguages: typeof SUPPORTED_LANGUAGES
}

const DEFAULT_LANGUAGE: SupportedLanguage = 'en'
const STORAGE_KEY = 'bookaimark-language'

// Helper function to get current language info
export function getCurrentLanguageInfo(lang?: SupportedLanguage): typeof SUPPORTED_LANGUAGES[SupportedLanguage] {
  const currentLang = lang || DEFAULT_LANGUAGE;
  return SUPPORTED_LANGUAGES[currentLang];
}

export function useTranslation(): TranslationContextType {
  const [language, setLanguageState] = useState<SupportedLanguage>(DEFAULT_LANGUAGE)

  // Initialize language from localStorage on mount
  useEffect(() => {
    if (typeof window !== 'undefined') {
      try {
        const stored = localStorage.getItem(STORAGE_KEY)
        if (stored && stored in SUPPORTED_LANGUAGES) {
          setLanguageState(stored as SupportedLanguage)
        } else {
          // Try to detect browser language
          const browserLang = navigator.language.split('-')[0] as SupportedLanguage
          if (browserLang in SUPPORTED_LANGUAGES) {
            setLanguageState(browserLang)
          }
        }
      } catch (error) {
        console.warn('Failed to load language from localStorage:', error)
      }
    }
  }, [])

  // Save language to localStorage when it changes
  const setLanguage = useCallback((newLanguage: SupportedLanguage) => {
    setLanguageState(newLanguage)
    if (typeof window !== 'undefined') {
      try {
        localStorage.setItem(STORAGE_KEY, newLanguage)
      } catch (error) {
        console.warn('Failed to save language to localStorage:', error)
      }
    }
  }, [])

  // Translation function with fallback
  const t = useCallback((key: string, fallback?: string): string => {
    const translation = TRANSLATIONS[language]?.[key]
    if (translation) return translation
    
    // Fallback to English if key not found in current language
    if (language !== 'en') {
      const englishTranslation = TRANSLATIONS.en[key]
      if (englishTranslation) return englishTranslation
    }
    
    // Final fallback to provided fallback or key itself
    return fallback || key
  }, [language])

  const isRTL = SUPPORTED_LANGUAGES[language]?.rtl || false

  return {
    language,
    locale: language, // Alias for compatibility
    setLanguage,
    t,
    isRTL,
    availableLanguages: SUPPORTED_LANGUAGES
  }
}    